In this chapter we provide background knowledge to the reader to understand the work performed at the remaining chapters of this thesis, notably Chapters and. This chapter contains background knowledge about scheduling problems and algorithms, as well as a brief introduction to machine learning, with emphasis on regression problems. Furthermore, to increase the presentation flow and quality of this chapter, many recent and related works are also presented in a intertwined manner along the text of this chapter.

\begin{itemize}
    \item scheduling
    \item follow the renewables
    \item consolidation
    \item sizing / capacity planning
\end{itemize}



Related work from the previous papers:



Cloud infrastructures became a critical component of society in the
last decade, from private life to big company development. The energy
efficiency of these platforms has been widely studied and improved by
academics and Cloud providers \cite{muralidhar2020energy}. This
progress, however, did not lead to a reduction of global Cloud energy
consumption. In~\cite{masanet2020recalibrating}, authors estimate the
growth of Data Centers (DCs) needs between 2010 and 2018 to a 10-fold
increase in IP traffic, a 25-fold increase in storage capacity, and a
6-fold increase of DCs workload. The impact of this explosion of
usages has thus been limited by efficiency improvement of platforms to
an energy increase of only 6\%. Projections over the following years
are, however, quite pessimistic. In~\cite{koot2021usage}, authors
consider different scenarios for the period 2016--2030, with
predictions ranging between a wavering balance and a significant
increase in electricity needs.


These predictions consider big trends in IT, but they do not embrace
unpredictable events, such as the COVID pandemic, and particularly the
lockdown periods, that overturned the global Information Technologies
(IT) usages \cite{feldmann2021implications}.


Another approach to reducing the environmental impact of cloud
computing energy needs consists of studying DCs' energy sources. Most
Cloud providers have made commitments to renewable energy usage in
recent years. According to a Greenpeace report, \cite{greenpeace2017},
many DCs were already fully supplied by renewable energy in
2017. However, they are not the majority of cases. A typical example
is the IT infrastructures of Virginia, which are named the ``Ground
zero for the Dirty Internet'', with 2\% of renewable energy power
plants against 37\% of coal. They are known to host 70\% of US
internet traffic. Green computing is still chimerical.


A critical question on renewable energy production facilities is their
intermittency. Hydroelectric dams and, to a certain extent, offshore
windmills can provide constant energy. However, they are not
appropriate for on-site electricity production for a DC. Onshore
windmills and solar farms are more likely to be deployed with minimal
constraints. The on-site electricity production is thus determined by
local weather. In contrast to wind speed, which can be difficult to
predict, solar irradiance follows daily and yearly
patterns. Photovoltaic (PV) panels are thus more appropriate for
predictable on-site renewable energy production facilities.


Most sizing research focuses on a single DC. There are two approaches, either to consider that the DC can use the electrical grid as a fallback or to consider how to size a DC only with on-site renewable sources.

Most sizing approaches consider the capability to use the electrical grid. %sizing with grid
\cite{padma2021_fogdcs_rural} use a Particle Swarm Optimization approach for sizing a smart microgrid to supply fog DCs located in a rural area in India. The objective of the optimization is to reduce the capital cost of buying solar panels, wind turbines, diesel generators, and batteries. Power from the regular electrical grid can be used when there is no green power production. The authors also propose a scheduling algorithm to maximize green energy usage.
% https://doi.org/10.1007/s11276-019-02207-z
%
\citet{Niaz2022_curtailment} evaluates using curtailed renewable energy to power DCs and provide hydrogen to hydrogen refueling stations. The authors model their problem as a MILP (Mixed Integer Linear Programming) with the objective of minimizing the costs. System components included natural-gasâ€“powered combined cooling, heating, and power systems, electrolyzers, hydrogen fuel cells, heat pumps, hydrogen tanks, and battery energy storage systems. The results were that using only power from the electrical grid was the worse in both economic and environmental terms. Using a mix of curtailed renewable energy and electricity from the grid was the most economical. Using only renewable energy was the best for the environment; however, it had the highest costs.
% https://doi.org/10.1016/j.jpowsour.2022.231558

%sizing without grid
In some cases, the approach considers how also to size on-site energy production, removing the need to access the electrical grid.
\citet{Richter2021_netzero_dcs} proposes a planning methodology for net-zero energy systems, and performed a qualitative study to evaluate a net-zero energy DC located in Germany. The conclusion is that by selecting appropriate technologies for energy generation, increasing energy efficiency, and optimal sizing Energy Storage Systems, the DC showed large potential to operate as a net-zero energy system. A DC as a net-zero energy system can increase the marketing image and add economic value to the related company.
% https://doi.org/10.3390/en14175577
%
\citet{HADDAD2021100505} proposes to size a DC using only on-site renewable energy and energy storage systems (batteries and hydrogen). This work focuses on a single DC and discusses the impact of its location, its workload, and its context on the resulting sizing (number of servers, renewable sources, and storage).
% https://doi.org/10.1016/j.suscom.2020.100505
%
\citet{manal2022} proposes to reduce the usual oversizing of renewable-powered DCs. Classical sizing approaches based on traces are defined by a few days with unusually high workloads and/or low renewable availability. In this work, the authors propose to reduce such sizing and evaluate the impact on the Quality of Service and on the sizing itself. Contrary to the previous studies, they use a binary search approach to find the best relevant sizing instead of MILP formulation.

%elec sizing
Some research focuses on the sizing of particular elements, such as the electrical infrastructure.
% \citet{Kazhamiaka22_comparison_pv_bat_sizing} evaluates the state-of-the-art in sizing both PVs and batteries simultaneously with the minimum cost. They consider optimization methods, simulations, and stochastic network calculus. The conclusion is that simulation appears to be the best too for sizing, due to both qualitative and quantitative reasons.
% https://doi.org/10.1109/TSUSC.2019.2946246
% not related to DC sizing, we can use the space to talk about the carbon explorer work
%
\citet{sheme2018_batsize} studies the impact of the battery size to reach a specific green coverage of 50\% (half of the energy consumption of the DC needs to be green). They develop a simulation tool that uses as input the area of PVs and capacity of the batteries. Experiments comparing countries (Finland, Crete, and Nigeria) show that the number of solar panels needed in Crete and Finland is slightly higher than in Nigeria, 17\% and 45\%, respectively. However, although Finland provides only 15\% less annual solar energy than Nigeria, it requires a battery size of 39 times bigger to achieve wasted energy at level 0. While in Crete, a battery capacity of only 27\% greater than in Nigeria is needed. %for this goal.}
% https://doi.org/10.1007/978-3-319-75928-9_49


Overall, most studies focus on sizing individual DCs. This is similar in the context of scheduling renewable-powered DCs: \citet{SONG2022326} reviews recent publications on the field of DCs powered by Renewable Energy mix. It shows that among more than 100 publications, only a quarter focuses on geographically distributed data centers partially powered by renewable energy mix. It also shows that most research in this field focuses on workload scheduling, while few articles focus on the adaptation or sizing of the infrastructure.

% The Carbon Explorer work from Facebook is similar and very related to this paper. It should be discussed in the related work at least.

The Carbon Explorer framework is an example of a study that explores sizing multiple DCs \cite{acun2022holistic}. The framework explores three solutions to achieve 100\% renewable operation of DCs distributed over the United States of America: i) only use renewable energy; ii) use renewable energy and energy storage; and iii) use renewable energy and schedule the workload. These DCs already have access to local solar power, wind power, or both. The carbon emissions from manufacturing PVs, wind turbines, batteries, and servers are considered. An exhaustive search is used to find the solutions. The work concludes that 100\% renewable operation may not be the optimal solution when considering the geographic location of the DC, and the carbon emissions from the manufacturing phase. Furthermore, the authors say that choosing the optimal solution is still an open research question for future work.



Our approach focuses on optimally sizing of geo-distributed DCs across the globe, which has not yet been studied to the best of our knowledge. Furthermore, in contrast to the Carbon Explorer framework, our solution allows using the regular electrical grid when opportune, given it may be supplied by a low-carbon intensive source. Finally, contrary to most studies using a MILP, our model uses a linear program formulation.



%% Add about chasing carbon  - https://doi.org/10.1109/MM.2022.3163226

%% Add about ACT: designing sustainable computer systems with an architectural carbon modeling tool -  https://doi.org/10.1145/3470496.3527408


\section{Summary}

In this chapter we presented a brief overview of the scheduling theory in the context of High Performance Computing, with emphasis on parallel job scheduling problems, list scheduling and backfilling algorithms. We also made a short introduction to machine learning, with emphasis on regression problems. Finding optimal solutions for parallel job scheduling problems is notoriously hard and, although there are many approximation algorithms with proven performance guarantees, many practitioners end up adopting simple heuristics, such as EASY Backfilling, to schedule parallel jobs. The content present in this chapter must be sufficient for the reader to follow the remaining chapters of this thesis. In the remaining chapters we present the main contributions of the thesis, starting by presenting the ways we explored simulation and machine learning to learn simple parallel job scheduling heuristics. 